#
# @configure_input@
# This file is a Makefile for Tk.  If it has the name "Makefile.in",
# it is a template for a Makefile; to generate the actual Makefile,
# run "./configure", which is a configuration script generated by the
# "autoconf" program (constructs like "@foo@" will get replaced in the
# actual Makefile).

#----------------------------------------------------------------
# Things you can change to personalize the Makefile for your own
# site (you can make these changes in either Makefile.in or
# Makefile, but changes to Makefile will get lost if you re-run
# the configuration script).
#----------------------------------------------------------------

# Default top-level directories in which to install architecture-
# specific files (exec_prefix) and machine-independent files such
# as scripts (prefix).  The values specified here may be overridden
# at configure-time with the --exec-prefix and --prefix options
# to the "configure" script.

exec_prefix =	@exec_prefix@
prefix =	@prefix@

# Directory in which to install the library of Tk scripts and demos
# (note: you can set the TK_LIBRARY environment variable at run-time to
# override the compiled-in location):
TK_LIBRARY =	@TK_LIBRARY_NAME@

# Directory in which to install the CIMBuilder package.
CB_LIBRARY =	@CB_LIBRARY_NAME@

# Directory in which to install the tkemacs library file (if
# you are currently building TkSteal):
TKEMACS_LIBRARY = @TK_LIBRARY_NAME@

# Directory in which to install the archive libtk.a:
LIB_DIR =	$(exec_prefix)/lib

# The name for the new libtk.
TK_LIB_NAME =	tk

# The name for the new wish executable.
WISH_NAME =	@WISH_NAME@

# Directory in which to install the program wish:
BIN_DIR =	$(exec_prefix)/bin

# Directory in which to install the include file tk.h:
INCLUDE_DIR =	$(prefix)/include

# Top-level directory for manual entries:
MAN_DIR =	$(prefix)/man

# Directory in which to install manual entry for wish:
MAN1_DIR =	$(MAN_DIR)/man1

# Directory in which to install manual entries for Tk's C library
# procedures:
MAN3_DIR =	$(MAN_DIR)/man3

# Directory in which to install manual entries for the built-in
# Tcl commands implemented by Tk:
MANN_DIR =	$(MAN_DIR)/mann

# The directory containing the Tcl sources and headers appropriate
# for this version of Tk ("@srcdir@" will be replaced or has already
# been replaced by the configure script):
TCL_DIR =	@TCL_SOURCE@

# The directory containing the Tk sources and headers
# ("@srcdir@" will be replaced or has already been replaced
# by the configure script):
TK_DIR =	@TK_SOURCE@

# The directory containing the Tk library archive file:
TK_BIN_DIR =	@TK_SOURCE@

# The command that is used to ling tcl and tk into wish.
TCLTK_LD_CMD=	@TCLTK_LD_CMD@

# To change the compiler switches, for example to change from -O
# to -g, change the following line:
CFLAGS = 	@CFLAGS@ @CPPFLAGS@

# Some versions of make, like SGI's, use the following variable to
# determine which shell to use for executing commands:
SHELL =		/bin/sh

#----------------------------------------------------------------
# The information below is modified by the configure script when
# Makefile is generated from Makefile.in.  You shouldn't normally
# modify any of this stuff by hand.
#----------------------------------------------------------------

AC_FLAGS =		@DEFS@
LD_FLAGS = 		@LDFLAGS@
INSTALL =		@INSTALL@
INSTALL_PROGRAM =	@INSTALL_PROGRAM@
INSTALL_DATA =		@INSTALL_DATA@
RANLIB =		@RANLIB@
LN_S =			@LN_S@
SRC_DIR =		@srcdir@
VPATH =			@srcdir@

SHDIR =			@SHDIR@
CC =            	@CC@

PASS_FLAGS =		"CC=$(CC)" "CFLAGS=$(CFLAGS)" "LDFLAGS=$(LDFLAGS)" "TK_LIB_NAME=$(TK_LIB_NAME)" "WISH_NAME=$(WISH_NAME)" "TK_LIBRARY=$(TK_LIBRARY)" "PROTO_FLAGS=$(PROTO_FLAGS)" "LIB_DIR=$(LIB_DIR)" "CB_LIBRARY=$(CB_LIBRARY)" "SHDIR=$(SHDIR)" "TK_BIN_DIR=$(TK_BIN_DIR)" "TCLTK_LD_CMD=$(TCLTK_LD_CMD)"

#----------------------------------------------------------------
# The information below should be usable as is.  The configure
# script won't modify it and you shouldn't need to modify it
# either.
#----------------------------------------------------------------

all: prepare
	$(MAKE) $(PASS_FLAGS) wish

prepare: prepareMessage @GET_TARGETS@ make-$(SHDIR) @PATCH_TARGETS@
	./configure -with-config-local

prepareMessage: 
	-@echo "Preparing the source tree..."

wish: $(WISH_NAME)

$(WISH_NAME): @BUILD_TARGETS@
	-@(cd wish; $(MAKE) all $(PASS_FLAGS))

build-libtk:
	-@if [ -d libtk ]; then \
		(cd libtk; $(MAKE) all $(PASS_FLAGS)); \
	fi

build-libtksteal:
	-@if [ -d libTkSteal ]; then \
		(cd libTkSteal; $(MAKE) all $(PASS_FLAGS)); \
	fi

build-libtkmegawidget:
	-@if [ -d libTkMegaWidget ]; then \
		(cd libTkMegaWidget; $(MAKE) all $(PASS_FLAGS)); \
	fi

build-libtkicon:
	-@if [ -d libTkIcon ]; then \
		(cd libTkIcon; $(MAKE) all $(PASS_FLAGS)); \
	fi

build-libtkmobal:
	-@if [ -d libTkMobal ]; then \
		(cd libTkMobal; $(MAKE) all $(PASS_FLAGS)); \
	fi

build-libtkcb:
	-@if [ -d libTkCB ]; then \
		(cd libTkCB; $(MAKE) all $(PASS_FLAGS)); \
	fi

build-libdes:
	-@if [ -d libdes ]; then \
		(cd libdes; $(MAKE) all $(PASS_FLAGS)); \
	fi

build-libxpm:
	-@if [ -d libxpm ]; then \
		(cd libxpm; $(MAKE) all $(PASS_FLAGS)); \
	fi

make-$(SHDIR):
	-@if [ -d libtk ]; then \
		if [ ! -d libtk/$(SHDIR) ]; then \
			echo "Making directory libtk/$(SHDIR)"; \
			mkdir libtk/$(SHDIR); \
		fi; \
	fi
	-@if [ -d libTkSteal ]; then \
		if [ ! -d libTkSteal/$(SHDIR) ]; then \
			echo "Making directory libTkSteal/$(SHDIR)"; \
			mkdir libTkSteal/$(SHDIR); \
		fi; \
	fi
	-@if [ -d libTkMegaWidget ]; then \
		if [ ! -d libTkMegaWidget/$(SHDIR) ]; then \
			echo "Making directory libTkMegaWidget/$(SHDIR)"; \
			mkdir libTkMegaWidget/$(SHDIR); \
		fi; \
	fi
	-@if [ -d libdes ]; then \
		if [ ! -d libdes/$(SHDIR) ]; then \
			echo "Making directory libdes/$(SHDIR)"; \
			mkdir libdes/$(SHDIR); \
		fi; \
	fi
	-@if [ -d libTkIcon ]; then \
		if [ ! -d libTkIcon/$(SHDIR) ]; then \
			echo "Making directory libTkIcon/$(SHDIR)"; \
			mkdir libTkIcon/$(SHDIR); \
		fi; \
	fi
	-@if [ -d libTkMobal ]; then \
		if [ ! -d libTkMobal/$(SHDIR) ]; then \
			echo "Making directory libTkMobal/$(SHDIR)"; \
			mkdir libTkMobal/$(SHDIR); \
		fi; \
	fi
	-@if [ -d libTkCB ]; then \
		if [ ! -d libTkCB/$(SHDIR) ]; then \
			echo "Making directory libTkCB/$(SHDIR)"; \
			mkdir libTkCB/$(SHDIR); \
		fi; \
	fi

get-libtk:
	-@if [ -f $(TK_BIN_DIR)/libtk.a ]; then \
		echo "Copying $(TK_BIN_DIR)/libtk.a"; \
		cp $(TK_BIN_DIR)/libtk.a libtk/lib$(TK_LIB_NAME).a; \
	else \
		if [ -f $(LIB_DIR)/libtk.a ]; then \
			echo "Copying $(LIB_DIR)/libtk.a"; \
			cp $(LIB_DIR)/libtk.a libtk/lib$(TK_LIB_NAME).a; \
		else \
			echo "Not able to find libtk.a"; \
		fi; \
	fi
	@GET_TK_SHARED_OBJECTS@

get-tksteal-files:
	-@if [ ! -d ./libTkSteal ]; then \
		mkdir ./libTkSteal >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libTkSteal/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkSteal/libTkSteal/tkXAccess.c ./libTkSteal >/dev/null 2>/dev/null
	-@cp ../TkSteal/libTkSteal/tkXAccess.h ./libTkSteal >/dev/null 2>/dev/null
	-@cp ../TkSteal/libTkSteal/Makefile.in ./libTkSteal >/dev/null 2>/dev/null
	-@chmod u+w ./libTkSteal/* >/dev/null 2>/dev/null
	-@if [ ! -d ./doc ]; then \
		mkdir ./doc >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkSteal/doc/tkEmacs.n ./doc >/dev/null 2>/dev/null
	-@cp ../TkSteal/doc/tkSteal.n ./doc >/dev/null 2>/dev/null
	-@cp ../TkSteal/doc/xaccess.n ./doc >/dev/null 2>/dev/null
	-@cp ../TkSteal/doc/tkemacs.n ./doc >/dev/null 2>/dev/null
	-@chmod u+w ./doc/* >/dev/null 2>/dev/null
	-@if [ ! -d ./library ]; then \
		mkdir ./library >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./library/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkSteal/library/tkEmacs.tcl ./library >/dev/null 2>/dev/null
	-@cp ../TkSteal/library/tkSteal.tcl ./library >/dev/null 2>/dev/null
	-@chmod u+w ./library/* >/dev/null 2>/dev/null
	-@if [ ! -d ./tkemacs ]; then \
		mkdir ./tkemacs >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./tkemacs/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkSteal/tkemacs/tkemacs.tcl ./tkemacs >/dev/null 2>/dev/null
	-@cp ../TkSteal/tkemacs/tkemacs.sh ./tkemacs >/dev/null 2>/dev/null
	-@cp ../TkSteal/tkemacs/tkemacsc.sh ./tkemacs >/dev/null 2>/dev/null
	-@chmod u+w ./tkemacs/* >/dev/null 2>/dev/null

get-tkmegawidget-files:
	-@if [ ! -d ./libTkMegaWidget ]; then \
		mkdir ./libTkMegaWidget >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libTkMegaWidget/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkMegaWidget/libTkMegaWidget/tkMegaWidget.c ./libTkMegaWidget >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libTkMegaWidget/tkMegaWidget.h ./libTkMegaWidget >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libTkMegaWidget/Dbg.c ./libTkMegaWidget >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libTkMegaWidget/Dbg.h ./libTkMegaWidget >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libTkMegaWidget/Makefile.in ./libTkMegaWidget >/dev/null 2>/dev/null
	-@chmod u+w ./libTkMegaWidget/* >/dev/null 2>/dev/null
	-@if [ ! -d ./libdes ]; then \
		mkdir ./libdes >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libdes/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkMegaWidget/libdes/*.c ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/*.h ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/*.man ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/*.pl ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/do* ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/PC* ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/Imakefile ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/Makefile.in ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/ARTISTIC ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/COPYING ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/INSTALL ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/README ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/makefile.ORIG ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/VERSION ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/KERBEROS ./libdes >/dev/null 2>/dev/null
	-@cp ../TkMegaWidget/libdes/MODES.DES ./libdes >/dev/null 2>/dev/null
	-@chmod u+w ./libdes/* >/dev/null 2>/dev/null
	-@if [ ! -d ./doc ]; then \
		mkdir ./doc >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkMegaWidget/doc/megawidget.n ./doc >/dev/null 2>/dev/null
	-@chmod u+w ./doc/* >/dev/null 2>/dev/null
	-@if [ ! -d ./library ]; then \
		mkdir ./library >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./library/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkMegaWidget/library/tkMegaWidget.tcl ./library >/dev/null 2>/dev/null
	-@chmod u+w ./library/* >/dev/null 2>/dev/null

get-tkicon-files:
	-@if [ ! -d ./libTkIcon ]; then \
		mkdir ./libTkIcon >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libTkIcon/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkIcon/libTkIcon/tkIcon.h ./libTkIcon >/dev/null 2>/dev/null
	-@cp ../TkIcon/libTkIcon/tkIcon.c ./libTkIcon >/dev/null 2>/dev/null
	-@cp ../TkIcon/libTkIcon/tkCanvEdge.c ./libTkIcon >/dev/null 2>/dev/null
	-@cp ../TkIcon/libTkIcon/tkCanvIcon.c ./libTkIcon >/dev/null 2>/dev/null
	-@cp ../TkIcon/libTkIcon/tkCanvLayout.c ./libTkIcon >/dev/null 2>/dev/null
	-@cp ../TkIcon/libTkIcon/Makefile.in ./libTkIcon >/dev/null 2>/dev/null
	-@chmod u+w ./libTkIcon/* >/dev/null 2>/dev/null
	-@if [ ! -d ./doc ]; then \
		mkdir ./doc >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkIcon/doc/tkiconpane.n ./doc >/dev/null 2>/dev/null
	-@cp ../TkIcon/doc/tkicon.n ./doc >/dev/null 2>/dev/null
	-@chmod u+w ./doc/* >/dev/null 2>/dev/null
	-@if [ ! -d ./library ]; then \
		mkdir ./library >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./library/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkIcon/library/tkIconPane.tcl ./library >/dev/null 2>/dev/null
	-@chmod u+w ./library/* >/dev/null 2>/dev/null

get-tkmobal-files:
	-@if [ ! -d ./libTkMobal ]; then \
		mkdir ./libTkMobal >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libTkMobal/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkMobal/libTkMobal/tkMobalExt.c ./libTkMobal >/dev/null 2>/dev/null
	-@cp ../TkMobal/libTkMobal/tkMobalExt.h ./libTkMobal >/dev/null 2>/dev/null
	-@cp ../TkMobal/libTkMobal/Makefile.in ./libTkMobal >/dev/null 2>/dev/null
	-@chmod u+w ./libTkMobal/* >/dev/null 2>/dev/null

get-tkcb-files:
	-@if [ ! -d ./libtk ]; then \
		mkdir ./libtk >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkCB/libtk/Makefile.in ./libtk >/dev/null 2>/dev/null
	-@chmod u+w ./libtk/* >/dev/null 2>/dev/null
	-@if [ ! -d ./libTkCB ]; then \
		mkdir ./libTkCB >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libTkCB/* >/dev/null 2>/dev/null; \
	fi
	-@cp ../TkMobal/libTkCB/tkCBExt.c ./libTkCB >/dev/null 2>/dev/null
	-@cp ../TkMobal/libTkCB/tkCBExt.h ./libTkCB >/dev/null 2>/dev/null
	-@cp ../TkMobal/libTkCB/Makefile.in ./libTkCB >/dev/null 2>/dev/null
	-@chmod u+w ./libTkCB/* >/dev/null 2>/dev/null

get-tkcb-sourcefiles:
	-@if [ ! -d ./libtk ]; then \
		mkdir ./libtk >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	fi
	-@cp @TK_SOURCE@/tkListbox.c ./libtk
	-@chmod u+w ./libtk/* >/dev/null 2>/dev/null
	-@if [ ! -d ./libtk/library ]; then \
		mkdir ./libtk/library >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libtk/library/* >/dev/null 2>/dev/null; \
	fi
	-@cp @TK_SOURCE@/library/tk.tcl ./libtk/library
	-@cp @TK_SOURCE@/library/listbox.tcl ./libtk/library
	-@chmod u+w ./libtk/library/* >/dev/null 2>/dev/null
	-@if [ ! -d ./libtk/doc ]; then \
		mkdir ./libtk/doc >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libtk/doc/* >/dev/null 2>/dev/null; \
	fi
	-@cp @TK_SOURCE@/doc/man.macros ./libtk/doc
	-@cp @TK_SOURCE@/doc/listbox.n ./libtk/doc
	-@chmod u+w ./libtk/doc/* >/dev/null 2>/dev/null

get-kanji-files:
	-@if [ ! -d ./libtk ]; then \
		mkdir ./libtk >/dev/null 2>/dev/null; \
	else \
		chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	fi
	-@cp @TK_SOURCE@/tkWStr.c ./libtk
	-@cp @TK_SOURCE@/tkKinput2.c ./libtk
	-@cp @TK_SOURCE@/tkCtext.c ./libtk
	-@chmod u+w ./libtk/* >/dev/null 2>/dev/null

patch-tkcb-files:
	-@chmod u+w ./libtk/*
	-@chmod u+w ./libtk/doc/*
	-@chmod u+w ./libtk/library/*
	-@echo "Patching libtk for CIMBuilder support"
	-@(cd libtk; patch -l -p1 < ../../TkCB/cb.pat 1> ../TkCB.patch.out 2>&1)

make-tkemacs:
	-@if [ -f ./tkemacs/tkemacs.tcl ]; then \
		sed -e 's^=steal-wish^=$(BIN_DIR)/steal-wish^1' < ./tkemacs/tkemacs.sh | sed -e 's^/usr/local/lib^$(TKEMACS_LIBRARY)^g' > ./tkemacs/tkemacs; \
		chmod a+x ./tkemacs/tkemacs; \
		sed -e 's^=steal-wish^=$(BIN_DIR)/steal-wish^1' < ./tkemacs/tkemacsc.sh | sed -e 's^/usr/local/lib^$(TKEMACS_LIBRARY)^g' > ./tkemacs/tkemacsc; \
		chmod a+x ./tkemacs/tkemacsc; \
	fi

install: install-binaries install-libraries install-includes install-man

install-binaries: make-tkemacs
	@for i in $(LIB_DIR) $(BIN_DIR) $(TkEMACS_LIBRARY); do \
	    if [ ! -d $$i ]; then \
		echo "Making directory $$i"; \
		mkdir $$i; \
		chmod 755 $$i; \
		else true; \
		fi; \
	    done
	@echo "Installing $(WISH_NAME)"
	@$(INSTALL_PROGRAM) ./wish/$(WISH_NAME) $(BIN_DIR)
	@if [ -f ./libtk/lib$(TK_LIB_NAME).a ]; then \
		echo "Installing lib$(TK_LIB_NAME).a"; \
		$(INSTALL_DATA) ./libtk/lib$(TK_LIB_NAME).a $(LIB_DIR); \
		$(RANLIB) $(LIB_DIR)/lib$(TK_LIB_NAME).a; \
	fi
	@if [ -f ./libTkSteal/libTkSteal.a ]; then \
		echo "Installing libTkSteal.a"; \
		$(INSTALL_PROGRAM) ./libTkSteal/libTkSteal.a $(LIB_DIR); \
	fi
	@if [ -f ./libTkMegaWidget/libTkMegaWidget.a ]; then \
		echo "Installing libTkMegaWidget.a"; \
		$(INSTALL_PROGRAM) ./libTkMegaWidget/libTkMegaWidget.a $(LIB_DIR); \
	fi
	@if [ -f ./libTkIcon/libTkIcon.a ]; then \
		echo "Installing libTkIcon.a"; \
		$(INSTALL_PROGRAM) ./libTkIcon/libTkIcon.a $(LIB_DIR); \
	fi
	@if [ -f ./libTkMobal/libTkMobal.a ]; then \
		echo "Installing libTkMobal.a"; \
		$(INSTALL_PROGRAM) ./libTkMobal/libTkMobal.a $(LIB_DIR); \
	fi
	@if [ -f ./libTkCB/libTkCB.a ]; then \
		echo "Installing libTkCB.a"; \
		$(INSTALL_PROGRAM) ./libTkCB/libTkCB.a $(LIB_DIR); \
	fi
	@if [ -d ./tkemacs ]; then \
		echo "Installing tkemacs"; \
		$(INSTALL_PROGRAM) ./tkemacs/tkemacs.tcl $(TKEMACS_LIBRARY); \
		$(INSTALL_PROGRAM) ./tkemacs/tkemacs $(BIN_DIR); \
		$(INSTALL_PROGRAM) ./tkemacs/tkemacsc $(BIN_DIR); \
	fi

install-libraries:
	@for i in $(prefix)/lib $(INCLUDE_DIR) $(TK_LIBRARY); do \
	    if [ ! -d $$i ]; then \
		echo "Making directory $$i"; \
		mkdir $$i; \
		chmod 755 $$i; \
		else true; \
		fi; \
	    done
	-@if [ -d ./library ]; then \
	    for i in tkEmacs.tcl tkGS.tcl tkSteal.tcl tkIconPane.tcl tkMegaWidget.tcl; do \
	      if [ -f ./library/$$i ]; then \
	        echo "Installing library/$$i"; \
	        $(INSTALL_DATA) ./library/$$i $(TK_LIBRARY); \
              fi; \
	    done; \
	fi
	-@if [ -d ./libtk/library ]; then \
	    for i in tk.tcl listbox.tcl; do \
	      if [ -f ./libtk/library/$$i ]; then \
	        echo "Installing library/$$i"; \
	        $(INSTALL_DATA) ./libtk/library/$$i $(TK_LIBRARY); \
              fi; \
	    done; \
	fi

install-includes: 
	@for i in $(INCLUDE_DIR); do \
	    if [ ! -d $$i ]; then \
		echo "Making directory $$i"; \
		mkdir $$i; \
		chmod 755 $$i; \
		else true; \
		fi; \
	    done
	-@if [ -d ./libtk ]; then \
	    for i in tk.h; do \
	      if [ -f ./libtk/$$i ]; then \
	        echo "Installing include/$$i"; \
	        $(INSTALL_DATA) ./libtk/$$i $(INCLUDE_DIR); \
              fi; \
	    done; \
	fi
	-@if [ -f ./libTkSteal/tkXAccess.h ]; then \
		echo "Installing tkXAccess.h"; \
		$(INSTALL_PROGRAM) ./libTkSteal/tkXAccess.h $(INCLUDE_DIR); \
	fi
	-@if [ -f ./libTkMegaWidget/tkMegaWidget.h ]; then \
		echo "Installing tkMegaWidget.h"; \
		$(INSTALL_PROGRAM) ./libTkMegaWidget/tkMegaWidget.h $(INCLUDE_DIR); \
	fi
	-@if [ -f ./libTkIcon/tkIcon.h ]; then \
		echo "Installing tkIcon.h"; \
		$(INSTALL_PROGRAM) ./libTkIcon/tkIcon.h $(INCLUDE_DIR); \
	fi
	-@if [ -f ./libTkMobal/tkMobalExt.h ]; then \
		echo "Installing tkMobalExt.h"; \
		$(INSTALL_PROGRAM) ./libTkMobal/tkMobalExt.h $(INCLUDE_DIR); \
	fi
	-@if [ -f ./libTkCB/tkCBExt.h ]; then \
		echo "Installing tkCBExt.h"; \
		$(INSTALL_PROGRAM) ./libTkCB/tkCBExt.h $(INCLUDE_DIR); \
	fi

install-man:
	-@for i in $(MAN_DIR) $(MAN1_DIR) $(MAN3_DIR) $(MANN_DIR); do \
	    if [ ! -d $$i ]; then \
		echo "Making directory $$i"; \
		mkdir $$i; \
		chmod 755 $$i; \
		else true; \
		fi; \
	    done;
	-@if [ -d $(SRC_DIR)/doc ]; then \
	    cd $(SRC_DIR)/doc; for i in megawidget.n tkiconpane.n tkEmacs.n tkSteal.n xaccess.n tkemacs.n pinfo.n uxpm.n; do \
	        if [ -f $$i ]; then \
	            echo "Installing doc/$$i"; \
	            rm -f $(MANN_DIR)/$$i; \
	            sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
		        $$i > $(MANN_DIR)/$$i; \
	            chmod 444 $(MANN_DIR)/$$i; \
                fi; \
	        done; \
	    fi
	-@if [ -d $(SRC_DIR)/libtk/doc ]; then \
	    cd $(SRC_DIR)/libtk/doc; for i in button.n canvas.n checkbutton.n listbox.n menu.n menubutton.n options.n radiobutton.n; do \
	        if [ -f $$i ]; then \
	            echo "Installing doc/$$i"; \
	            rm -f $(MANN_DIR)/$$i; \
	            sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
		        $$i > $(MANN_DIR)/$$i; \
	            chmod 444 $(MANN_DIR)/$$i; \
                fi; \
	        done; \
	fi

Makefile: $(SRC_DIR)/Makefile.in
	$(SHELL) config.status

clean:
	-@rm -f *.o shared/* core errs *~ \#* TAGS *.E a.out errors tktest *.orig config.log config.cache $(WISH_NAME); \
	if [ -d ./lib ]; then \
		(cd lib; $(MAKE) clean); \
	fi; \
	if [ -d ./libtk ]; then \
		(cd libtk; $(MAKE) clean); \
	fi; \
	if [ -d ./libTkSteal ]; then \
		(cd libTkSteal; $(MAKE) clean); \
	fi; \
	if [ -d ./libTkMegaWidget ]; then \
		(cd libTkMegaWidget; $(MAKE) clean); \
	fi; \
	if [ -d ./libTkIcon ]; then \
		(cd libTkIcon; $(MAKE) clean); \
	fi; \
	if [ -d ./libTkMobal ]; then \
		(cd libTkMobal; $(MAKE) clean); \
	fi; \
	if [ -d ./libTkCB ]; then \
		(cd libTkCB; $(MAKE) clean); \
	fi; \
	if [ -d ./libdes ]; then \
		(cd libdes; $(MAKE) clean); \
	fi; \
	if [ -d ./libxpm ]; then \
		(cd libxpm; $(MAKE) clean); \
	fi; \
	if [ -d ./wish ]; then \
		(cd wish; $(MAKE) clean); \
	fi

distclean: clean
	rm -f Makefile config.status

